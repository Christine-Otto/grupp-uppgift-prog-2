<!-- ============================================================
Fil: index.html
Templatemall – Startsida för Flask-applikationen "Författarens värld"
============================================================ -->

<!-- Denna sida innehåller ett formulär där användaren kan söka efter författare eller böcker.
     Formuläret skickas till Flask-route "/search" med POST-metoden.
     Cookies används för att förifylla tidigare värden när sidan laddas igen. -->

<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <title>Författarens värld</title>
</head>

<body>
    <!-- Sidans huvudrubrik -->
    <h1>Författarens värld</h1>

    <!-- Formuläret skickas till /search i Flask när användaren trycker på "Sök" -->
    <form method="POST" action="/search">

        <!-- Textfält för sökord: titel eller författare -->
        <!-- Förifylls automatiskt från cookie om användaren sökt tidigare -->
        <label for="search">Sökord (titel eller författare):</label><br>
        <input type="text" id="search" name="search"
               value="{{ request.cookies.get('search', '') }}"><br><br>

        <!-- Dropdown-lista för språk -->
        <!-- Jinja-syntaxen kontrollerar vilken språk-cookie som var senast vald -->
        <label for="languages">Språk:</label><br>
        <select id="languages" name="languages">
            <option value="">Alla</option>
            <option value="en" {% if request.cookies.get('languages') == 'en' %}selected{% endif %}>Engelska</option>
            <option value="sv" {% if request.cookies.get('languages') == 'sv' %}selected{% endif %}>Svenska</option>
            <option value="fr" {% if request.cookies.get('languages') == 'fr' %}selected{% endif %}>Franska</option>
        </select><br><br>

        <!-- Fritextfält för ämne -->
        <label for="subjects">Ämne:</label><br>
        <input type="text" id="subjects" name="subjects"
               value="{{ request.cookies.get('subjects', '') }}"><br><br>

        <!-- Författarens födelseår – intervall: från -->
        <label for="author_year_start">Författarens födelseår (från):</label><br>
        <input type="number" id="author_year_start" name="author_year_start"
               value="{{ request.cookies.get('author_year_start', '') }}"><br><br>

        <!-- Författarens födelseår – intervall: till -->
        <label for="author_year_end">Författarens födelseår (till):</label><br>
        <input type="number" id="author_year_end" name="author_year_end"
               value="{{ request.cookies.get('author_year_end', '') }}"><br><br>

        <!-- Sorteringsalternativ -->
        <!-- Använder cookies för att minnas senast valda sortering -->
        <label for="sort">Sortera efter:</label><br>
        <select id="sort" name="sort">
            <option value="">Standard</option>
            <option value="popular" {% if request.cookies.get('sort') == 'popular' %}selected{% endif %}>Popularitet</option>
            <option value="recent" {% if request.cookies.get('sort') == 'recent' %}selected{% endif %}>Nyast</option>
        </select><br><br>

        <!-- Val av filtyp för nedladdning -->
        <label for="mime_type">Filtyp:</label><br>
        <select id="mime_type" name="mime_type">
            <option value="">Alla</option>
            <option value="text/html" {% if request.cookies.get('mime_type') == 'text/html' %}selected{% endif %}>HTML</option>
            <option value="text/plain" {% if request.cookies.get('mime_type') == 'text/plain' %}selected{% endif %}>Text</option>
            <option value="application/epub+zip" {% if request.cookies.get('mime_type') == 'application/epub+zip' %}selected{% endif %}>EPUB</option>
        </select><br><br>

        <!-- Bokhyllor / genrer -->
        <label for="bookshelves">Bokhylla:</label><br>
        <select id="bookshelves" name="bookshelves">
            <option value="">Alla</option>
            <option value="Children's Literature" {% if request.cookies.get('bookshelves') == "Children's Literature" %}selected{% endif %}>Barnlitteratur</option>
            <option value="Science Fiction" {% if request.cookies.get('bookshelves') == 'Science Fiction' %}selected{% endif %}>Science Fiction</option>
            <option value="History" {% if request.cookies.get('bookshelves') == 'History' %}selected{% endif %}>Historia</option>
        </select><br><br>

        <!-- Sidnummer – låter användaren välja vilken resultatsida som ska visas -->
        <label for="page">Sida:</label><br>
        <input type="number" id="page" name="page"
               value="{{ request.cookies.get('page', '1') }}"><br><br>

        <!-- Skickar formuläret till Flask-servern -->
        <button type="submit">Sök</button>
    </form>
</body>
</html>


<!-- ------------------------------------------------------------
FÖRKLARING
-------------------------------------------------------------
- POST-metoden skickar formuläret till /search i Flask.
- Cookies används för att förifylla tidigare värden.
- {% if True %}selected{% endif %} markerar senast valt alternativ.
- Fält och namn följer Gutendex-API:s parametrar.
------------------------------------------------------------- -->
